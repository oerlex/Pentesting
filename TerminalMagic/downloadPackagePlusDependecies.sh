#! /bin/bash
# This script came in handy when we deployed a machine in a network where we needed to install some additional software (My bad!) and had no internet connection.
# On any internet connected Linux box we ran the following commands and bundled the software + dependencies and transfered them via SCP.
#
# Download package and all dependencies recursively
sudo apt-get download $(apt-cache depends --recurse --no-recommends --no-suggests --no-conflicts --no-breaks --no-replaces --no-enhances <your-package-here> | grep "^\w" | sort -u)
dpkg-scanpackages . | gzip -9c > Packages.gz

# Pack it all together
cd ..
tar -zcvf packageplusdependencies.tar.gz <#folderwithdependencies>

# Move tar.gz to the target without internet und unzip
tar -xzvf  packageplusdependencies.tar.gz

# Then add the folder to sources.list and update
echo "deb file:<your folder here> ./" | sudo tee -a /etc/apt/sources.list
sudo apt-get update
