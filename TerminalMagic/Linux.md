# File Operations
This section contains resources on how to perform search operations in a Unix-based OS

### Count files with certain file extension
```bash
ls -1R | sed 's/[^\.]*//' | sed 's/.*\.//' | sort | uniq -c
```

### Find with path exclusionn
```bash
sudo find / webserver.py -not -path "/proc/*"
```

###  Find specified string recursively in all files
```bash
find <directory> -type f -exec sh -c 'RES=$(strings {} | grep <searchword>) && echo "{} : $RES"' \;
```

### See n lines before and after occurence of string
```bash
cat myfile.txt | grep dog -B 5 -A 5
```

### Replace defined characters with null
```bash
cat myfile.txt | tr -d ‘.’
```

### Show the size of directory
```bash
# du = DiskUsage
sudo du -sh /var
```

### Sorting Files According To Their Size
```bash
# du = DiskUsage
du -ah ..DIR.. | grep -v "/$" | sort -rh

# Show top N e.g. 5
du -ah ..DIR.. | grep -v "/$" | sort -rh | head -5
```

### Show difference between files
```bash
diff file1 file2
```

### Show file size in MB,GB,...
```bash
ls -l --block-size=MB
```

### Use tail with updating end
```bash
tail -f filename
```

### Show size of mounted filesystem (df)
Shows the size, used space, and available space on the mounted filesystems of your computer.  
Two of the most useful options are the -h (human readable) and -x (exclude) options.  
```bash
df -h -x squashfs
```

# User and Group Operations
### List all local groups which have users assigned to them
```bash
cut -d: -f1 /etc/group | sort
```

### Show information about user (finger)
The finger command gives you a short dump of information about a user, including the time of the user’s last login, the user’s home directory, and the user account’s full name.
```bash
finger
```

### Add SSH-Key to keychain
Add file to home-folder/.ssh/
```bash
ssh-add -k keyfile
```

# Network Operations

### Add Temporary IP And Route
```bash
sudo ifconfig eth0 192.168.1.X netmask 255.255.255.0  
sudo ip route add default gw 192.168.1.1  
route -n
```

### SOCKSv5 Proxy
```bash
ssh -D 1337 -N -C -q root@10.208.226.32
Set firefox proxy to socks5 and allow dns over it
```

### GUI programs in SSH
```bash
ssh -X
```
Run GUI programs such as firefox, burpsuite,...
In the ssh session type screen. In screen you can switch between session using  ctrl+a+c for a new “window" ctrl+a+n to switch to the next

### Dump all from FTP
```bash
dump all files from an ftp
wget -m ftp://anonymous:a@10.208.226.11
```

# openssl
Taken from https://www.sslshopper.com/article-most-common-openssl-commands.html

Check private key
```bash
openssl rsa -in privateKey.key -check
```
Check a certificate
```bash
openssl x509 -in certificate.crt -text -noout
```
Convert DER <--> PEM
```bash
openssl x509 -inform der -in certificate.cer -out certificate.pem
openssl x509 -outform der -in certificate.pem -out certificate.der
```
Convert a PEM certificate file and a private key to PKCS#12 (.pfx .p12)
```bash
openssl pkcs12 -export -out certificate.pfx -inkey privateKey.key -in certificate.crt -certfile CACert.crt
```

### Info about monitors/graphics devices (lspci/lshw)
```bash
lspci -nn | grep '\[03'  
sudo lshw -c video
```

# Misc.

### Raise the elephant
The magic SysRq key is a key combination understood by the Linux kernel, which allows the user to perform various low-level commands regardless of the system's state. It is often used to recover from freezes, or to reboot a computer without corrupting the filesystem.Its effect is similar to the computer's hardware reset button (or power switch) but with many more options and much more control.

The QWERTY (or AZERTY) mnemonics: "Raising Elephants Is So Utterly Boring", "Reboot Even If System Utterly Broken" or simply the word "BUSIER" read backwards, are often used to remember the following SysRq-keys sequence:

On DELL computers SysRq = Fn
```bash
Alt+SysRq+r  ( The LEFT Alt key ) ( SysRq is on the same button as print screen )
Alt+SysRq+s
Alt+SysRq+e
Alt+SysRq+i
Alt+SysRq+u
Alt+SysRq+b
```

### Check shared libraries
As an example we can check the shared libraries used by /bin/ls on a x86 Kali box
```bash
root@kali:~# ldd /bin/ls
	linux-vdso.so.1 (0x00007ffee17c7000)
	libselinux.so.1 => /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007ff50526c000)
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007ff5050ac000)
	libpcre2-8.so.0 => /lib/x86_64-linux-gnu/libpcre2-8.so.0 (0x00007ff505027000)
	libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007ff505022000)
	/lib64/ld-linux-x86-64.so.2 (0x00007ff5052de000)
	libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007ff505001000)
```
