## Static Analysis

If available
* MobSF
  * Upload .Apk to mobsf and investigate report
  * Check permissions of the app
  * Accessibility of Broadcast Receviers, ...
  * Check strings

### strings
```console
strings myapp.apk | grep password/user/key/...
```
### apktool
```console
apktool decode -o /my/dir/ myapp.apk
```
### Jadx GUI to decompile and peek around

## Dynamic Analysis
Investigate and fuzz the requests to the cloud with Burp including:
* Registration
* Login
* Change PW
* Other app-specific requests

### Preparations
1. Root the test device or use a rooted system image provided by AndroidStudio (use the x86 image !)
1. Install the Burp cert on the device as described [here](https://support.portswigger.net/customer/portal/articles/1841102-Mobile%20Set-up_Android%20Device%20-%20Installing%20CA%20Certificate.html)
1. Install APK
```console
adb root
adb devices -l
adb install
```
Next SSL Unpin the application as described here [here](https://github.com/oerlex/Pentesting/blob/master/AppTesting/Objection.md)

#### Fixing issues with AndroidStudio
Newer versions of AndroidStudio could have the bug that clicking the icons on the side pane of the emulator will result in a crash of the emulator.  
It will show the error **Running as root without --no-sandbox is not supported. See https://crbug.com/638180**  
It is possible to graphically run androidstudio as another user wil the following hack (Creds to [mjuu](github.com/mjuu!)):

```console
# on the host
# enable display export (CARE!! this will allow everyone to connect to the X server and should be disabled (xhost -) after use)
xhost +
#check $DISPLAY variable
echo $DISPLAY
:1

# login as the other user
su - test
# export the display
export DISPLAY=:1
#Run your programs

# on encrypted operating system add the user to the kvm group
# show user in the kvm group
grep kvm /etc/group

# add user to kvm group
adduser $USER kvm 
```

