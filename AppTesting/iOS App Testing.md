## Jailbreak iOS
* 3uTools - http://www.3u.com/
* iMazing
* iFunbox
* Altstore

## Static Analysis
* Upload to mobSF and check result
* Unzip the iOS file and peek around

## Dynamic Analysis
Depending on the prerequisites there are different ways to setup the test environment.

### Non-Jailbroken device
Prerequisites:
- A Mac with XCODE (free version suffices)
- An iPhone
- Frida and Objection installed

Why do we need a MAC?
- XCODE can only be installed on MACOS
- We need a Developer Disk Image (DDI) is a dmg drive which gets mounted on your device in /Developer whenever you use Xcode.

Which XCODE version supports whih iOS version?
Xcode 12.3 → iOS 14.3
Xcode 12.2 → iOS 14.2
Xcode 12.1 → iOS 14.1
Xcode 12 → iOS 14
Xcode 11.7 → iOS 13.7
Xcode 11.6 → iOS 13.6
Xcode 11.5 → iOS 13.5
Xcode 11.4 → iOS 13.4

1. Start XCODE and create an empty project
2. Go to project settings
3. Plug in the iPhone
4. Select the Phone in XCODE
5. Under "Signing & Capabilities" Check the "Automatically manage signing" checkbox
6. Build and Run --> embedded.mobileprovision on disk
7. In your iPhone you have to trust the app in the device settings otherwise this error will likely to appear after the first run "Settings App -> General -> Profiles & Device Management -> Select your iTunes account from the "Developer App" section -> Select "Trust""
8. Install the dependencies required for patching the .ipa
\
prep
```console
brew install npm
xcode-select --install  #Command line tools package
sudo xcode-select -s /Applications/Xcode.app/Contents/Developer #Point xcode-select to the Xcode app Developer directory
``` 
\
AppleSign 
```console 
npm install -g applesign
```
\
DyLib
```console 
git clone https://github.com/Tyilo/insert_dylib
cd insert_dylib
xcodebuild
cp build/Release/insert_dylib /usr/local/bin/insert_dylib
```
\
Others
```console
brew install p7zip
```
\
9. Find the signature
```console 
security find-identity -p codesigning -v
```
\
10. Patch!
```console 
objection patchipa — source ./myapp.ipa — codesign-signature SIGNATURE
```
\
11. Move the patched ip to Kali

From Kali 
```console
sudo apt-get install libimobiledevice  
sudo apt-get install ideviceinstaller  
ideviceinstaller -i <Path_to_your_ipa> 
idevicedebug -d run com.dingdong.myapp
objection explore
```

Links:
https://github.com/sensepost/objection/wiki/Patching-iOS-Applications
https://github.com/sensepost/objection/wiki/Running-Patched-iOS-Applications

### Jailbroken device


### Useful Links
Objection - https://github.com/sensepost/objection
objection is a runtime mobile exploration toolkit, powered by Frida. It was built with the aim of helping assess mobile applications and their security posture without the need for a jailbroken or rooted mobile device.

Check my notes @ https://gihttps://github.com/oerlex/Pentesting/edit/master/AppTesting/objection.md

First we need to patch the ipa file 
https://github.com/sensepost/objection/wiki/Patching-iOS-Applications

Have fun
https://github.com/sensepost/objection/wiki/Working-with-Jobs


