# Jailbreak iOS

http://www.3u.com/

# Static Analysis
* Upload to mobSF and check result
* Unzip the iOS file and peek around

# Dynamic Analysis

Objection - https://github.com/sensepost/objection
objection is a runtime mobile exploration toolkit, powered by Frida. It was built with the aim of helping assess mobile applications and their security posture without the need for a jailbroken or rooted mobile device.

First we need to patch the ipa file 
https://github.com/sensepost/objection/wiki/Patching-iOS-Applications

Have fun
https://github.com/sensepost/objection/wiki/Working-with-Jobs


## SSL unpin##

* Jailbreak the iOS device using the original unc0ver release
* The following site shows a collection of jailbreaks associated with scam: Scam Jailbreaks
* Install Frida from Cydia
* Smoke test frida-ps -Uai should list all processes
* In iOS apps a single iOS Security framework function SecTrustEvaluate(...) evaluates trust for the specified certificate and policies. So we need to hook in right there.
Load frida -U -n "AppName" -l unpinSSL.js

```Javascript
var DEBUG = true;
function main() {
    // Get SecTrustEvaluate address
    var SecTrustEvaluate_prt = Module.findExportByName("Security", "SecTrustEvaluate");
    if (SecTrustEvaluate_prt == null) {
        console.log("[!] Security!SecTrustEvaluate(...) not found!");
        return;
    }
    // Create native function wrappers for SecTrustEvaluate
    var SecTrustEvaluate = new NativeFunction(SecTrustEvaluate_prt, "int", ["pointer", "pointer"]);
    
    // Hook SecTrustEvaluate
    Interceptor.replace(SecTrustEvaluate_prt, new NativeCallback(function(trust, result) {
        // Show "hit!" message if we are in debugging mode
        if (DEBUG) console.log("[*] SecTrustEvaluate(...) hit!");
        // Call original function
        var osstatus = SecTrustEvaluate(trust, result);
        // Change the result to kSecTrustResultProceed
        Memory.writeU8(result, 1);
        // Return errSecSuccess
        return 0;
    }, "int", ["pointer", "pointer"]));
console.log("[*] SecTrustEvaluate(...) hooked. SSL should be pinning disabled.");	
}
// Run the script
main();
```
